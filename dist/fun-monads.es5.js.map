{"version":3,"file":"fun-monads.es5.js","sources":["../src/Option/index.ts"],"sourcesContent":["'use strict'\n\nexport class None<A> {\n  readonly type: string = \"None\"\n\n  isNone(): boolean {\n    return true\n  }\n\n  isSome(): boolean {\n    return false\n  }\n\n  isEmpty = this.isNone\n  isDefined = this.isSome\n\n  get(): A {\n    throw new Error('Unsupported operation None.get')\n  }\n\n  map<B>(f: (a: A) => B): Option<B> {\n    return new None<B>()\n  }\n\n  flatMap<B>(f: (a: A) => Option<B>): Option<B> {\n    return new None<B>()\n  }\n\n  getOrElse(x: A): A {\n    return x\n  }\n\n  flatten(): Option<A> {\n    return new None<A>()\n  }\n\n  orElse<B>(b: Option<B>): Option<A> | Option<B> {\n    return b\n  }\n\n  toList(): A[] {\n    return []\n  }\n\n  ap<B>(fa: Option<(a: A) => B>): Option<B> {\n    return new None<B>()\n  }\n\n  filter(p: (a: A) => boolean): Option<A> {\n    return new None<A>()\n  }\n\n  has(p: (a: A) => boolean): boolean {\n    return false\n  }\n\n  exists = this.has\n\n  forEach(fn: (a: A) => any): void {\n    // noop\n  }\n\n}\n\nexport class Some<A> {\n  readonly type: string = 'Some'\n  readonly value: A\n\n  constructor(value: A) {\n    this.value = value\n    if (this.value == null) {\n      throw new Error('null or undefined exception. Please use Option.apply')\n    }\n    return this\n  }\n\n  isNone(): boolean {\n    return false\n  }\n\n  isSome(): boolean {\n    return true\n  }\n\n  isEmpty = this.isNone\n  isDefined = this.isSome\n\n  get(): A {\n    return this.value\n  }\n\n  map<B>(f: (a:A) => B): Option<B> {\n    const res = f(this.value)\n    return res == null\n      ? new None<B>()\n      : new Some<B>(res)\n  }\n\n  flatMap<B>(f: (x: A) => Option<B>): Option<B> {\n    return f(this.value)\n  }\n\n  getOrElse(x: A): A {\n    return this.get()\n  }\n\n  flatten(): Option<A> {\n    if(this.value instanceof Option) {\n      return this.value as unknown as Option<A>\n    } else {\n      return this\n    }\n  }\n\n  orElse<B>(b: Option<B>): Option<A> | Option<B> {\n    return this\n  }\n\n  toList(): A[] {\n    return [this.get()]\n  }\n\n  ap<B>(fa: Option<(a:A) => B>): Option<B> {\n    return this.map<B>(fa.get())\n  }\n\n  filter(p: (a:A) => boolean): Option<A> {\n    return p(this.get())\n      ? this\n      : new None<A>()\n  }\n\n  has(p: (a:A) => boolean): boolean {\n    return p(this.get())\n  }\n\n  exists = this.has\n\n  forEach(fn: (a:A) => any): void {\n    fn(this.get())\n  }\n}\n\nexport type Option<A> = None<A> | Some<A>\n\nexport function Option<A>(value: A): Option<A> {\n  return Option.apply(value)\n}\n\nexport namespace Option {\n  export function none<A>(): Option<A> {\n    return new None<A>()\n  }\n\n  export const empty = none\n\n  export function some<A>(a: A): Option<A> {\n    return a == null ? new None<A>() : new Some(a)\n  }\n\n  export function apply<A>(a: A): Option<A> {\n    return some(a)\n  }\n\n  export function isSome<A>(fa: Option<A>): boolean {\n    return fa.isSome()\n  }\n\n  export function isNone<A>(fa: Option<A>): boolean {\n    return fa.isNone()\n  }\n\n  export const isEmpty = isNone\n  export const isDefined = isSome\n\n  export function get<A>(a:Option<A>): A {\n    return a.get()\n  }\n\n  export function map<A, B>(f: (x:A) => B, a: Option<A>): Option<B> {\n    return a.map(f)\n  }\n\n  export function flatMap<A, B>(f: (x:A) => Option<B>, a: Option<A>): Option<B> {\n    return a.flatMap(f)\n  }\n\n  export function getOrElse<A>(x:A, a:Option<A>): A {\n    return a.getOrElse(x)\n  }\n\n  export function flatten<A>(a: Option<Option<A>>): Option<A> {\n    return a.getOrElse(new None<A>())\n  }\n\n  export function ap<A, B>(f: Option<(a:A) => B>, a: Option<A>): Option<B> {\n    return a.ap(f)\n  }\n\n  export function filter<A>(p: (a:A) => boolean, a: Option<A>): Option<A> {\n    return a.filter(p)\n  }\n\n  export function has<A>(p: (a:A) => boolean, a: Option<A>): boolean {\n    return a.has(p)\n  }\n\n  export const exists = has\n\n  export function forEach<A>(f: (a:A) => any, a: Option<A>): void {\n    a.forEach(f)\n  }\n\n  export function orElse<A, B>(b: Option<B>, a: Option<A>): Option<A> | Option<B> {\n    return a.orElse(b)\n  }\n\n}\n\n\n\n\n"],"names":[],"mappings":"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"}